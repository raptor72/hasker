{% extends 'hasker/base_hasker.html' %}

{% block title %}
    {{ question.title }} - {{ question.super }}
{% endblock %}

{% block content %}
    <h1>
        {{ question.title }}
    </h1>

    <p>
        {{ question.content }}
    </p>

    <div class="admin-panel">
       {% for tag in question.tags.all %}
        <a href="{{ tag.get_absolute_url }}">{{ tag.title }}</a>
       {% endfor %}
    </div>

    <h2> {{ question.answer_count }} Answers</h2>
    <p>
       {% for answer in question.answer_set.all %}
            {{ answer.content }}
            <br>
            <p class="answered"> answered by {{ answer.user  }} </p>
            <br>
            <br>
       {% endfor %}
    </p>

{% if user.is_authenticated %}
{#    <form action="{{ question.answer_set.save }}" method="post"> {# create, add #}
    <form action="{{ question.get_absolute_url }}" method="post"> {# create, add #}
        {% csrf_token %}

        {% for field in form %}
            {% if field.errors %}
                {{ field.errors }}
            {% endif %}

            {{ field.label  }}
            {{ field }}
        {% endfor %}

        <button type="submit">Add answer</button>
    </form>
 {% endif %}


{% endblock %}

